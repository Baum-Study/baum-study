## 4가지 방법으로 컨테이너 이미지 만들기

### 기본 방법으로 빌드하기

- **Dockerfile**: 컨테이너 이미지를 빌드하기 위한 모든 정보를 담고 있는 텍스트 파일로, 기본적인 컨테이너 빌드는 Dockerfile을 사용해 이루어집니다. Dockerfile에는 베이스 이미지, 필요한 패키지 설치, 애플리케이션 파일 복사, 실행 명령어 등이 포함됩니다. 이 방법은 가장 널리 사용되며, 표준화된 프로세스를 통해 일관된 환경을 구축할 수 있습니다.

### 컨테이너 용량 줄이기

- **경량화 이미지 사용**: 컨테이너 이미지의 크기를 줄이는 방법으로, 알파인(Alpine)과 같은 경량화 베이스 이미지를 사용하는 것이 있습니다. 경량화 이미지를 사용하면 불필요한 파일이나 패키지를 제거하여 컨테이너 크기를 대폭 줄일 수 있으며, 이는 배포 속도와 보안 측면에서도 이점이 있습니다.

### 컨테이너 내부에서 컨테이너 빌드하기

- **컨테이너 내부에서의 빌드**: Dockerfile 하나만으로 컨테이너를 빌드할 수 있는 편리함이 있지만, 컨테이너 내부에서 다른 컨테이너를 빌드하는 것은 권장되지 않는 방법입니다. 이 방법은 이미지 크기를 불필요하게 크게 만들고, 결과적으로 성능 저하를 초래할 수 있습니다. 따라서 빌드 프로세스를 외부에서 관리하고, 컨테이너 내부에서는 실행에 필요한 최소한의 환경만 유지하는 것이 바람직합니다.

### 최적화해 컨테이너 빌드하기

- **멀티 스테이지 빌드**: 최적화된 컨테이너 이미지를 만들기 위해 멀티 스테이지 빌드를 사용하는 방법이 있습니다. 멀티 스테이지 빌드에서는 빌드 과정과 최종 이미지를 분리하여, 최종 이미지에 불필요한 빌드 도구나 중간 파일이 포함되지 않도록 합니다. 이를 통해 최종 이미지의 용량을 줄이고, 배포 및 운영 효율성을 높일 수 있습니다.

## 쿠버네티스에서 직접 만든 컨테이너 사용하기

### 쿠버네티스에서 도커 이미지 구동하기

- **쿠버네티스에서 이미지 실행**: 쿠버네티스는 컨테이너를 효율적으로 관리하기 위해 설계된 플랫폼으로, 직접 만든 컨테이너 이미지를 클러스터에서 쉽게 구동할 수 있습니다. `kubectl` 명령어를 사용하여 쿠버네티스 클러스터에서 원하는 파드를 생성하고, 이 파드에 직접 빌드한 이미지를 적용하여 운영할 수 있습니다.

### 레지스트리 구성하기

- **Quay**: 레드햇이 제공하는 이미지 레지스트리로, 유료 버전에서는 안정적인 서비스를 위한 기술 지원이 제공됩니다.
- **Harbor**: 오픈 소스 레지스트리로, 이미지와 헬름 차트를 함께 관리할 수 있습니다. 클라우드 네이티브 컴퓨팅 재단의 지원을 받으며, 두 가지 모두를 사용하는 사용자에게 적합합니다.
- **Nexus Repository**: 다양한 형식의 파일을 저장할 수 있는 레지스트리로, 유료 버전에서는 추가적인 기술 지원과 기능을 제공합니다. 여러 패키지 형식을 하나의 저장소에 관리하려는 사용자에게 적합합니다.
- **Docker Registry**: 도커에서 제공하는 간단한 레지스트리로, 무료로 사용할 수 있으며, 도커 이미지만 저장할 수 있습니다. 개인용이나 테스트용으로 적합한 레지스트리입니다.
