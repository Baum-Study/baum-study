# 새로운 인프라 환경이 온다.

IT 분야는 매우 빠르게 변화합니다.  
사용자의 요구 사항, 개발자의 편의성, 인프라 환경과 같이 다양한 요소가 변화합니다.  
이런 빠르게 바뀌는 환경에 맞는 **애자일**이라는 개발 방법론도 생겼습니다.  
인프라 환경도 애자일 개발 방법론에 맞게 컨테이너 환경으로 변화하고 있습니다.  

## 컨테이너 인프라 환경이란
컨테이너란 하나의 커널에서 다른 프로세스의 영향을 받지 않고 독립적으로 실행되는 프로세스 상태입니다.   
컨테이너에서 실행되는 프로세스는 가상화 상태에서 동작하는 프로세스보다 가볍고 빠르게 동작합니다.  

### 모놀리식 아키텍처
모놀리식 아키텍처란 하나의 큰 어플리케이션에서 여러개의 큰 도메인을 포함하는 구조입니다.  
이런 모놀리식 아키텍처는 설계가 비교적 쉽고 코드 관리 및 개발이 단순해집니다.  
하지만 서비스를 운영할 때 수정 사항이 많을 경우 다른 도메인에 영향을 더 많이 끼칠 수 있습니다.
예를 들어 카페 서비스에서 메뉴를 하나 추가해서 배포하게 된다면 뉴스, 웹툰, 결제 서비스도 같이 재배포 되게 됩니다.  
이렇게 된다면 배포에 걸리는 시간이 더 오래 걸리게 됩니다.  
배포에 걸리는 시간이 오래 걸리면 특정 서버가 많은 트래픽을 받아 죽게 되었을 때 서버가 다시 정상적으로 돌아오는데 더 많은 시간이 걸리게 되는거죠.   
외적으로도 개발 시에도 불편함을 얻을 수도 있죠.  

### 마이크로서비스 아키텍처(msa)
msa는 모놀리식 아키텍처와 동일한 목표를 가졌지만 도메인 별로 서버를 구성합니다.  
이런 형태는 서비스를 배포할 때 다른 서비스들에게 영향을 최소한으로 줄 수 있게 됩니다.  
하지만 개발 및 구성이 어려우며 복잡성이 증가하고 네트워크를 많이 타기 때문에 성능에도 영향을 줍니다.  
msa에서는 api 요청을 gateway를 통해 받고 서비스 디스커버리를 통해 서비스들을 관리합니다.  
서비스마다 각기 다른 데이터베이스를 갖게 될 수 있고 서비스를 새로 추가할 때도 기존 서비스들을 재사용하여 사용할 수도 있죠.  

### 컨테이너 인프라 환경에 적합한 아키텍처

아키텍처에는 정답은 없지만 초기에 시간적으로 여유가 있고 자금이 있다면 확장가능성이 좋은 msa가 좋을 수도 있습니다.  

## 컨테이너 인프라 환경을 지원하는 도구

### 도커
도커는 위에서 설명했던 컨테이너를 만들고 관리해주는 컨테이너 도구입니다.  
도커로 어플리케이션을 실행한다면 운영 체제에 관계 없이 독립적인 환경에서 일관된 결과를 보장합니다.  

### 쿠버네티스
쿠버네티스는 여러 컨테이너를 오케스트레이션하는 도구입니다.  
여기서 오케스트레이션이란 자동 배포, 컨테이너에 대한 동작 보증(health check), 부하에 따른 동적 확장(scale out) 등의 기능을 의미합니다.

### 젠킨스
젠킨스는 CI/CD를 지원하는 프로그램입니다.  
젠킨스는 별도의 스크립트 파일을 작성해야합니다.  
현재 비유바움 개발 서버에서는 젠킨스를 통해 CI/CD가 구현이 되어있습니다.  

### 프로메테우스와 그라파나
프로메테우스와 그라파나는 모니터링을 위한 도구입니다.  
프로메테우스는 데이터를 수집하고 그라파나는 수집한 데이터를 통해서 관리자가 보기 좋게 시각화 해줍니다.