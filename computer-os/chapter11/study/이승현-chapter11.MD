# CPU 스케줄링

## 프로세스 우선순위

- CPU 스케줄링 : CPU가 자원을 배분하는 것
- 프로세스 마다 우선순위가 다름 → 우선순위가 높다는 것은 빨리 처리해야 하는 프로세스라는 뜻
- 상황에 맞게, 프로세스의 중요도에 맞게 프로세스가 CPU 를 이용할 수 있도록 하기 위해 운영체제는 프로세스마다 우선순위를 부여함
- 운영체제는 각 프로세스의 PCB에 우선순위를 명시 → PCB에 적힌 우선순위를 기준으로 먼저 처리할 프로세스를 결정함

### 입출력 집중 프로세스 & CPU 집중 프로세스

- 입출력 집중 프로세스 : 비디오 재생이나 디스크 백업 작업을 담당하는 프로세스와 같이 입출력 작업이 많은 프로세스
- CPU 집중 프로세스 : 복잡한 수학 연산, 컴파일, 그래픽 처리 작업을 담당하는 프로세스와 같이 CPU 작업이 많은 프로세스
- 입출력 집중 프로세스는 실행 상태보다는 입출력을 위한 대기 상태에 더 많이 머무르게 되고,
- CPU 집중 프로세스는 대기 상태보다는 실행 상태에 더 많이 머무르게 됨

## 스케줄링 큐

- 운영체제가 매번 모든 PCB 를 검사하는 것은 번거롭고 시간이 오래걸림
- 따라서 운영체제는 줄을 서서 기다릴 것을 요구하고 이 줄을 스케줄링 큐로 구현하고 관리함
- 큐 종류 : 준비 큐(CPU 를 이용하고 싶은 프로세스), 대기(입출력장치를 이용하기 위해 대기상테에 접어든 프로세스) 큐
- 운영체제는 PCB 들이 큐에 삽입된 순서대로 프로세스를 하나씩 꺼내어 실행하되, 그 중 우선순위가 높은 프로세스를 먼저 실행함
- 예) 입출력이 완료되어 완료 인터럽트 발생 → 운영체제는 대기 큐에서 작업이 완료된 PCB 를 찾고, 이 PCB 를 준비 상태로 변경한 뒤 대기 큐에서 제거함

## 선점형과 비선점형 스케줄링

### 선점형 스케줄링

- 선점형 스케줄링 : 프로세스가 CPU 를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식
- 장점 : 한 프로세스의 독점을 막고 자원 분배 가능
- 단점 : 문맥 교환 과정에서 오버헤드 발생 가능성 있음

### 비선점형 스케줄링

- 비선점형 스케줄링 : CPU 를 사용하고 있는 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까진 다른 프로세스가 끼어들 수 없는 스케줄링 방식
- 장점 : 문맥교환의 횟수가 선점형 보다는 비교적 적어서 선점형 스케줄링 보다는 오버헤드 발생 가능성이 적음
- 단점 : 어떤 프로세스가 자원을 사용 중이라면, 당장 자원을 사용해야하는 상황에서도 대기해야함

## CPU 스케줄링 알고리즘

### 1. 선입 선처리 스케줄링

- FCFS(First Come First Served  Scheduling)스케줄링 이라고도 부름
- CPU 를 먼저 요청한 프로세스부터 CPU 를 할당하는 스케줄링 방식
- 호위효과가 발생할 수 있음

  호위효과 : 호위효과는 CPU 스케줄링 맥락에서, 긴 작업이 큐의 앞부분에 있을 때 발생합니다. 긴 작업이 CPU를 오랫동안 점유하게 되면, 뒤에 있는 짧은 작업들이 계속해서 대기하게 되어 전체 시스템의 응답 시간이 길어지는 현상입니다.


### 2. 최단 작업 우선 스케줄링

- SFJ(Shortest Job Scheduling) 스케줄링이 라고도 부름
- CPU  이용시간의 길이가 가장 짧은 프로세스부터 실행하는 스케줄링 방식

### 3. 라운드 로빈 스케줄링

- 라운드 로빈 스케줄링 (Round Robin Scheduling)
- 선입 선처리 스케줄링에 타임 슬라이스라는 개념이 더해진 스케줄링 방식
- 타임 슬라이스 : 각 프로세스가 CPU 를 사용할 수 있는 시간이 정해져 있는 것을 의미
- 타임 슬라이스만큼의 시간 동안 돌아가며 CPU 를 이용하는 선점형 스케줄링
- 타임 슬라이스가 클 경우 : 호위효과가 발생할 수 있음
- 타임 슬라이스가 작을 경우 : 문맥 교환에 발생하는 비용이 커서 CPU 를 프로세스를 처리하는 일보다 전환하는데 자원을 더 사용하는 상황이 발생

### 4. 최소 잔여 시간 우선 스케줄링

- SRT(Shortest Remaining Time) 스케줄링은 최단 작업 우선 스케줄링 알고리즘과 라운드 로빈 알고리즘을 합친 스케줄링 방식
- 최소 잔여 시간 우선 스케줄링 하에서 프로세스들은 정해진 타임 슬라이스만큼 CPU 를 사용하되, CPU 를 사용할 다음 프로세스로는 남아있는 작업 시간이 적은 프로세스가 선택됨

### 5. 우선순위 스케줄링

- 프로세스들에 우선순위를 부여하고, 우선순위가 높은 것부터 실행하는 스케줄링 방식
- 기아현상이 발생할 수 있음

  기아 현상 : 낮은 우선순위를 가진 작업이 높은 우선순위의 작업들에 밀려 계속해서 CPU나 다른 자원을 할당받지 못하는 경우가 발생할 수 있는 현상을 말합니다.

- 기아현상을 방지하는 에이징 기법이 있음

  에이징 : 오래 대기한 작업의 우선순위를 점진적으로 높여주어, 결국에는 자원을 할당받을 수 있도록 하는 방식입니다.


### 6. 다단계 큐 스케줄링

- 스케줄링은 작업들을 여러 개의 서로 다른 큐로 분류하여 스케줄링하는 방법
- 한 큐에 들어간 작업은 다른 큐로 이동하지 않음 (고정)

### 7. 다단계 피드백  큐 스케줄링

- 다단계 큐 스케줄링의 확장된 형태로, 작업이 실행되면서 큐 사이를 이동 가능