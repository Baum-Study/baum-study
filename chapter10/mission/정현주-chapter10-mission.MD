# Context Switching의 오버헤드를 줄이는 방법
Context Switching은 CPU가 하나의 작업에서 다른 작업으로 전환할 때 발생합니다.  
이 전환 과정에서 CPU는 현재 작업의 상태(컨텍스트)를 저장하고, 새 작업의 상태를 로드해야 합니다. 이 과정에서 시간과 자원이 소모되며, 이를 오버헤드라고 합니다.
</br>
</br>
이러한 오버헤드를 아래와 같은 방식으로 코루틴을 사용하여 줄일 수 있습니다.
</br>
</br>
### 1. 경량 스레드 사용
코루틴은 경량 스레드로, 많은 코루틴을 사용해도 시스템 자원을 크게 소비하지 않아 컨텍스트 스위칭 오버헤드가 적습니다.
</br>
</br>
### 2. 비동기 작업 처리
코루틴을 사용하면 비동기적으로 작업을 처리할 수 있어, 스레드 블로킹을 피하고 컨텍스트 스위칭 오버헤드를 줄일 수 있습니다.
</br>
</br>
### 3. 일시 중단과 재개
코루틴은 필요할 때 일시 중단하고 나중에 다시 재개할 수 있어, 불필요한 컨텍스트 스위칭을 줄일 수 있습니다.
</br>
</br>
</br>
```kotlin
fun main() = runBlocking {
    // 1000개의 코루틴을 생성하여 비동기 작업 처리
    val jobs = List(1000) {
        launch {
            delay(1000L) // 1초 대기
            println("Coroutine $it is done")
        }
    }
    // 모든 코루틴이 완료될 때까지 기다림
    jobs.forEach { it.join() }
}
```
1000개의 코루틴을 생성하여 비동기적으로 작업을 처리하고, 각 코루틴은 1초 동안 대기한 후 메시지를 출력합니다.  
위와 같이 많은 코루틴을 사용해도 코루틴은 경량 스레드이므로 컨텍스트 스위칭 오버헤드가 적습니다.
